{
  "hash": "0744194980da3e4b35758b59a44d8d16",
  "result": {
    "engine": "knitr",
    "markdown": "---\neval: true\ncode-fold: false\nnumber-depth: 2\nengine: knitr\n---\n\n\n\n\n\n\n\n\n# R basics\n\nIn this chapter we will introduce to the R basics and some exercises to get familiar to how R works.\n\n## Math operations\n\n### Sum\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n1+1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n### Subtraction\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n5-2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n### Multiplication\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n2*2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 4\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n### Division\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n8/2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 4\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n### Round the number\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nround(3.14)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n\n```{.r .cell-code}\nround(3.14, 1) # The \"1\" indicates to round it up to 1 decimal digit.\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3.1\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\nYou can use help `?round` in the console to see the description of the function, and the default arguments.\n\n## Basics\n\n### Combinations\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nc(1, 2, 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 2 3\n```\n\n\n:::\n\n```{.r .cell-code}\nc(1:3) # The \":\" indicates a range between the first and second numbers. \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 2 3\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n::: {.callout-tip appearance=\"simple\"}\n## Try it yourself\n\nTry to write a combination with the numbers 10, 11, 56, 57, 58.\n:::\n\n### Create a comment with `ctrl + shift + c`\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Comments help you organize your code. \n# A line with a comment will not be executed. \n```\n:::\n\n\n\n\n\n\n\n\n### Create a table\n\nA simple table with the number of trips by *car*, *PT*, *walking*, and *cycling* in a hypothetical street segment at a certain period.\n\n**Define variables**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodes <- c(\"car\", \"PT\", \"walking\", \"cycling\") # you can use \"=\" or \"<-\"\ntrips = c(200, 50, 300, 150) # key sensitive (uppercase and lowercase letters are different)\n```\n:::\n\n\n\n\n\n\n\n\n**Join the variables to create a table**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable_example = data.frame(modes, trips)\n```\n:::\n\n\n\n\n\n\n\n\n**Take a look at the table**\n\nVisualize the table by clicking on the \"Data\" in the \"Environment\" page or use :\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nView(table_example)\n```\n:::\n\n\n\n\n\n\n\n\n**Look at the first row**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable_example[1,] #rows and columns start from 1 in R, differently from Python which starts from 0.\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  modes trips\n1   car   200\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n**Look at first row and column**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable_example[1,1]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"car\"\n```\n\n\n:::\n\n```{.r .cell-code}\ntable_example[1,4]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n## Practical exercise\n\n**Dataset:** the number of trips between all municipalities in the Lisbon Metropolitan Area, Portugal [@IMOB].\n\n### Import dataset\n\nYou can click directly in the file under the \"Files\" pan, or:\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata = readRDS(\"data/TRIPSmode_mun.Rds\")\n```\n:::\n\n\n\n\n\n\n\n\n\n\n::: {.callout-tip appearance=\"simple\"}\nAfter you type `\"` you can use `tab` to navigate between folders and files and `enter` to autocomplete.\n:::\n\n### Take a first look at the data\n\n**Summary statistics**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Origin_mun        Destination_mun        Total             Walk       \n Length:315         Length:315         Min.   :     7   Min.   :     0  \n Class :character   Class :character   1st Qu.:   330   1st Qu.:     0  \n Mode  :character   Mode  :character   Median :  1090   Median :     0  \n                                       Mean   : 16825   Mean   :  4033  \n                                       3rd Qu.:  5374   3rd Qu.:     0  \n                                       Max.   :875144   Max.   :306289  \n      Bike              Car            PTransit            Other        \n Min.   :   0.00   Min.   :     0   Min.   :     0.0   Min.   :    0.0  \n 1st Qu.:   0.00   1st Qu.:   263   1st Qu.:     5.0   1st Qu.:    0.0  \n Median :   0.00   Median :   913   Median :   134.0   Median :    0.0  \n Mean   :  80.19   Mean   :  9956   Mean   :  2602.6   Mean   :  152.4  \n 3rd Qu.:   0.00   3rd Qu.:  4408   3rd Qu.:   975.5   3rd Qu.:   62.5  \n Max.   :5362.00   Max.   :349815   Max.   :202428.0   Max.   :11647.0  \n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n**Check the structure of the data**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nClasses 'tbl_df', 'tbl' and 'data.frame':\t315 obs. of  8 variables:\n $ Origin_mun     : chr  \"Alcochete\" \"Alcochete\" \"Alcochete\" \"Alcochete\" ...\n $ Destination_mun: chr  \"Alcochete\" \"Almada\" \"Amadora\" \"Barreiro\" ...\n $ Total          : num  20478 567 188 867 114 ...\n $ Walk           : num  6833 0 0 0 0 ...\n $ Bike           : num  320 0 0 0 0 0 0 0 91 0 ...\n $ Car            : num  12484 353 107 861 114 ...\n $ PTransit       : num  833 0 81 5 0 ...\n $ Other          : num  7 214 0 0 0 0 0 0 0 0 ...\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n**Check the number of rows (observations) and columns (variables)**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnrow(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 315\n```\n\n\n:::\n\n```{.r .cell-code}\nncol(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 8\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n**Open the dataset**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nView(data)\n```\n:::\n\n\n\n\n\n\n\n\n![The following three rules make a dataset tidy: variables are columns, observations are rows, and values are cells. \\[\\@wickham17r\\]](https://r4ds.hadley.nz/images/tidy-1.png){fig-align=\"center\"}\n\n### Explore the data\n\n**Check the total number of trips**\n\nUse `$` to select a variable of the data\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(data$Total)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 5299853\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n**Percentage of car trips related to the total**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(data$Car)/sum(data$Total) * 100\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 59.17638\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n**Percentage of active trips related to the total**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(sum(data$Walk) + sum(data$Bike)) / sum(data$Total) * 100\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 24.44883\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n### Modify original data {#manipulation}\n\n**Create a column with the sum of the number of trips for active modes**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata$Active = data$Walk + data$Bike\n```\n:::\n\n\n\n\n\n\n\n\n**Filter by condition (create new tables)**\n\nFilter trips only with origin from Lisbon\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_Lisbon = data[data$Origin == \"Lisboa\",]\n```\n:::\n\n\n\n\n\n\n\n\nFilter trips with origin **different** from Lisbon\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_out_Lisbon = data[data$Origin != \"Lisboa\",]\n```\n:::\n\n\n\n\n\n\n\n\nFilter trips with origin **and** destination in Lisbon\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_in_Out_Lisbon = data[data$Origin == \"Lisboa\" & data$Destination == \"Lisboa\",]\n```\n:::\n\n\n\n\n\n\n\n\n**Remove the first column**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata = data[ ,-1] #first column\n```\n:::\n\n\n\n\n\n\n\n\n**Create a table only with origin, destination and walking trips**\n\nThere are many ways to do the same operation.\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Destination_mun\" \"Total\"           \"Walk\"            \"Bike\"           \n[5] \"Car\"             \"PTransit\"        \"Other\"           \"Active\"         \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_walk2 = data[ ,c(1,2,4)]\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_walk3 = data[ ,-c(3,5:9)]\n```\n:::\n\n\n\n\n\n\n\n\n### Export data\n\nSave data in **.csv** and **.Rds**\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite.csv(data, 'data/dataset.csv', row.names = FALSE)\nsaveRDS(data, 'data/dataset.Rds') #Choose a different file. \n```\n:::\n\n\n\n\n\n\n\n\n### Import data\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncsv_file = read.csv(\"data/dataset.csv\")\nrds_file = readRDS(\"data/dataset.Rds\")\n```\n:::\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}