{
  "hash": "1c8d612cc7927b8e87289854420ae5c4",
  "result": {
    "engine": "knitr",
    "markdown": "---\nformat:\n  pdf:\n    prefer-html: true\n---\n\n\n\n\n# Interactive maps\n\nYou can plot a static map using `plof(sf)`, but you can also create interactive maps.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\nTRIPSgeo = st_read(\"../data/TRIPSgeo.gpkg\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `TRIPSgeo' from data source \n  `/media/rosa/Dados/GIS/MQAT/data/TRIPSgeo.gpkg' using driver `GPKG'\nSimple feature collection with 18 features and 7 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -9.500527 ymin: 38.40907 xmax: -8.490972 ymax: 39.06472\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(TRIPSgeo)\n```\n\n::: {.cell-output-display}\n![](interactive-maps_files/figure-pdf/unnamed-chunk-2-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\nInteractive maps are useful to explore the data, as you can zoom in and out, and click on the points to see the data associated with them.\n\nThere are several R packages to create interactive maps.\nFor instance, the `tmap` package, the `leaflet` package, and the `mapview` package.\n\n## Mapview\n\nMapview allows to create quick interactive maps, only by declaring the function `mapview()`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(mapview)\nmapview(TRIPSgeo)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nPhantomJS not found. You can install it with webshot::install_phantomjs(). If it is installed, please make sure the phantomjs executable can be found via the PATH variable.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nfile:////tmp/RtmpzsQSl1/file255f2c49803f/widget255f2937675f.html screenshot completed\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](interactive-maps_files/figure-pdf/unnamed-chunk-3-1.png){fig-pos='H'}\n:::\n:::\n\n\n\n\nTo color the points by a variable, you can use the `zcol` argument.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmapview(TRIPSgeo, zcol = \"Total\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nfile:////tmp/RtmpzsQSl1/file255f7eb56f86/widget255f7c85c8eb.html screenshot completed\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](interactive-maps_files/figure-pdf/unnamed-chunk-4-1.png){fig-pos='H'}\n:::\n:::\n\n\n\n\nAs you can see, a color palette is automatically assigned to the **continuous variable**.\n\nTry to use a **categorical variable**.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nmapview(TRIPSgeo,\n        zcol = \"Municipality\", # depending on the variable\n        alpha.regions = 0.4, # also add transparency\n        color = \"white\" # border color\n        ) \n```\n:::\n\n\n\n\n::: {.callout-note appearance=\"simple\"}\nNote that you can change the **basemap**, and click on the geometries to **see the data** associated with them.\n:::\n\n![](images/clipboard-3307189144.png){width=\"540\"}\n\nYou can go crazy with all the options that `mapview` offers.\nPlease refer to the [documentation](https://r-spatial.github.io/mapview/articles/mapview_02-advanced.html) to see all the options.\n\n### Export\n\nYou can directly export the map as an `html` file or image, using the Viewer panel.\n\n![](images/clipboard-3542861620.png){width=\"470\"}\n\n::: {.callout-warning appearance=\"minimal\" icon=\"false\"}\nThis is the most straightforward solution.\n:::\n\nYou can also export a map as an html file or image using code.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"webshot2\") # you will need this\n\nmap = mapview(TRIPSgeo, zcol = \"Total\") # fisrt create a objet with the desired map\n\nmapshot2(map, \"data/map.html\") # as webpage\nmapshot2(map, file = \"data/map.png\") # as image\n```\n:::\n\n\n\n\n## Rmarkdown\n\nTo include a map on a report, website, paper (any type), you can create an Rmarkdown file.\n\n![](images/clipboard-1842640045.png){width=\"388\"}\n\nAnd include a R code chunk (`ctrl + alt + i`) with a map.\nIf the output is html, you will get an interactive map on your document!\n",
    "supporting": [
      "interactive-maps_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}