{
  "hash": "9deda32703482b32901161f56359d167",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Exploratory Data Analysis\"\ncode-fold: false\nnumber-depth: 2\n---\n\n\n\n\n\n\n## Intro\n\nThis chapter will show you how to use visualization and transformation\nto explore your data in a systematic way, a task that statisticians call\nexploratory data analysis, or **EDA** for short. EDA is an iterative\ncycle, where you should feel free to \"fall in love\" with your data.\n\nYou:\n\n1.  Generate questions about your data.\n\n2.  Search for answers by visualizing, transforming, and modelling your\n    data.\n\n3.  Use what you learn to refine your questions and/or generate new\n    questions.\n\n> Note: EDA is not a formal process with a strict set of rules!\n\nSee @wickham2017r for more, in particular the EDA chapter.\n\n::: {.callout-tip appearance=\"simple\"}\n## Do it yourself with R\n\nCopy the script\n[ExploratoryDataAnalysis.R](https://github.com/U-Shift/MQAT/blob/main/code/classroom/ExploratoryDataAnalysis.R)\nand paste it in your session.\\\nRun each line using `CTRL` + `ENTER`\n:::\n\n## Load packages\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) # Pack of most used libraries for data science\nlibrary(skimr) # summary of the data\nlibrary(DataExplorer) # exploratory data analysis\nlibrary(corrplot) # correlation plots\n```\n:::\n\n\n\n\n\n\n## Dataset\n\nThe database used in this example is a treated database from the Mobility Survey for the metropolitan areas of Lisbon and Porto in 2018 [@IMOB].\nWe will only focus on trips within the metropolitan area of Lisbon.\n\nIncluded **variables**:\n\n-   `Origin_dicofre16` - Code of Freguesia (district) as set by INE\n    after 2016 (Distrito + Concelho + Freguesia), for trip origin\n-   `Total` - number of trips with origin at each district\n-   `Walk` - number of walking trips\n-   `Bike` - number of bike trips\n-   `Car` - number of car trips. Includes taxi and motorcycle.\n-   `PTransit` - number of Public Transit trips\n-   `Other` - number of other trips (truck, van, tractor, aviation)\n-   `Distance` - average trip distance (km)\n-   `Duration` - average trip duration (minutes)\n-   `Car_perc` - percentage of car trips\n-   `N_INDIVIDUOS` - number of residents [@INEcensus]\n-   `Male_perc` - percentage of male residents [@INEcensus]\n-   `IncomeHH` - average household income\n-   `Nvehicles` - average number of car/motorcycle vehicles in the\n    household\n-   `DrivingLic` - percentage of car driving licence holders\n-   `CarParkFree_Work` - percentage of respondents with free car parking\n    at the work location\n-   `PTpass` - percentage of public transit monthly pass holders\n-   `internal` - binary variable (factor). `Yes`: trip with same TAZ\n    origin and destination, `No`: trips with different destination\n-   `Lisboa` - binary variable (factor). `Yes`: the district is part of\n    Lisbon municipality, `No`: otherwise\n-   `Area_km2` - area of in `Origin_dicofre16`, in km^2^\n\n### Import dataset\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata = readRDS(\"../data/IMOBmodel.Rds\")\n```\n:::\n\n\n\n\n\n\nTake a look at the dataset\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nView(data) # open in table\nglimpse(data) # glimpse of the dataset\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 236\nColumns: 20\n$ Origin_dicofre16 <chr> \"110501\", \"110501\", \"110506\", \"110506\", \"110507\", \"11~\n$ Total            <dbl> 35539, 47602, 37183, 42313, 30725, 54586, 57747, 6788~\n$ Walk             <dbl> 11325, 3502, 12645, 1418, 9389, 2630, 20423, 3573, 62~\n$ Bike             <dbl> 1309, 416, 40, 163, 1481, 168, 1406, 809, 13, 37, 3, ~\n$ Car              <dbl> 21446, 37727, 22379, 37337, 19654, 44611, 33044, 5225~\n$ PTransit         <dbl> 1460, 5519, 2057, 3285, 201, 6963, 2477, 10534, 110, ~\n$ Other            <dbl> 0, 437, 63, 106, 0, 215, 396, 717, 2, 169, 3, 824, 0,~\n$ Distance         <dbl> 11.779, 11.779, 9.868, 9.868, 9.600, 9.600, 12.875, 1~\n$ Duration         <dbl> 23.96, 23.96, 22.78, 22.78, 23.39, 23.39, 26.89, 26.8~\n$ Car_perc         <dbl> 60.34497, 79.25507, 60.18611, 88.24002, 63.96745, 81.~\n$ N_INDIVIDUOS     <dbl> 44165, 44165, 59238, 59238, 46529, 46529, 64192, 6419~\n$ Male_perc        <dbl> 47.66, 47.66, 47.12, 47.12, 45.54, 45.54, 46.14, 46.1~\n$ IncomeHH         <dbl> 2204.32, 2204.32, 1896.05, 1896.05, 2430.43, 2430.43,~\n$ Nvehicles        <dbl> 1.86, 1.86, 1.73, 1.73, 1.60, 1.60, 1.64, 1.64, 1.20,~\n$ DrivingLic       <dbl> 63.03, 63.03, 65.42, 65.42, 67.05, 67.05, 72.75, 72.7~\n$ CarParkFree_Work <dbl> 49.97, 49.97, 57.09, 57.09, 47.43, 47.43, 56.47, 56.4~\n$ PTpass           <dbl> 11.14, 11.14, 17.12, 17.12, 18.25, 18.25, 19.73, 19.7~\n$ internal         <fct> Yes, No, Yes, No, Yes, No, Yes, No, Yes, No, Yes, No,~\n$ Lisboa           <fct> No, No, No, No, No, No, No, No, Yes, Yes, Yes, Yes, Y~\n$ Area_km2         <dbl> 39.767414, 39.767414, 20.364310, 20.364310, 8.109861,~\n```\n\n\n:::\n\n```{.r .cell-code}\nstr(data) # Structure of the dataset \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'data.frame':\t236 obs. of  20 variables:\n $ Origin_dicofre16: chr  \"110501\" \"110501\" \"110506\" \"110506\" ...\n $ Total           : num  35539 47602 37183 42313 30725 ...\n $ Walk            : num  11325 3502 12645 1418 9389 ...\n $ Bike            : num  1309 416 40 163 1481 ...\n $ Car             : num  21446 37727 22379 37337 19654 ...\n $ PTransit        : num  1460 5519 2057 3285 201 ...\n $ Other           : num  0 437 63 106 0 215 396 717 2 169 ...\n $ Distance        : num  11.78 11.78 9.87 9.87 9.6 ...\n $ Duration        : num  24 24 22.8 22.8 23.4 ...\n $ Car_perc        : num  60.3 79.3 60.2 88.2 64 ...\n $ N_INDIVIDUOS    : num  44165 44165 59238 59238 46529 ...\n $ Male_perc       : num  47.7 47.7 47.1 47.1 45.5 ...\n $ IncomeHH        : num  2204 2204 1896 1896 2430 ...\n $ Nvehicles       : num  1.86 1.86 1.73 1.73 1.6 1.6 1.64 1.64 1.2 1.2 ...\n $ DrivingLic      : num  63 63 65.4 65.4 67 ...\n $ CarParkFree_Work: num  50 50 57.1 57.1 47.4 ...\n $ PTpass          : num  11.1 11.1 17.1 17.1 18.2 ...\n $ internal        : Factor w/ 2 levels \"Yes\",\"No\": 1 2 1 2 1 2 1 2 1 2 ...\n $ Lisboa          : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 1 1 1 1 1 2 2 ...\n $ Area_km2        : num  39.77 39.77 20.36 20.36 8.11 ...\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Summary statistics\n\nHave an overview of the variables and their statistics' summary.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(data) # Check the summary statistics\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Origin_dicofre16       Total             Walk              Bike        \n Length:236         Min.   :   361   Min.   :    0.0   Min.   :   0.00  \n Class :character   1st Qu.:  5918   1st Qu.:  763.2   1st Qu.:   0.00  \n Mode  :character   Median : 17474   Median : 3125.0   Median :  13.50  \n                    Mean   : 22457   Mean   : 5383.4   Mean   : 107.03  \n                    3rd Qu.: 33378   3rd Qu.: 8298.5   3rd Qu.:  98.75  \n                    Max.   :112186   Max.   :32646.0   Max.   :2040.00  \n      Car           PTransit         Other           Distance     \n Min.   :    0   Min.   :    0   Min.   :   0.0   Min.   : 6.835  \n 1st Qu.: 3243   1st Qu.:  249   1st Qu.:   2.0   1st Qu.: 9.539  \n Median : 9008   Median : 1057   Median :  44.0   Median :10.323  \n Mean   :13289   Mean   : 3474   Mean   : 203.4   Mean   :11.139  \n 3rd Qu.:21249   3rd Qu.: 4853   3rd Qu.: 281.5   3rd Qu.:12.097  \n Max.   :52631   Max.   :41672   Max.   :2391.0   Max.   :22.660  \n    Duration        Car_perc      N_INDIVIDUOS     Male_perc    \n Min.   :16.30   Min.   : 0.00   Min.   : 1566   Min.   :44.61  \n 1st Qu.:23.00   1st Qu.:45.40   1st Qu.:11060   1st Qu.:46.58  \n Median :24.70   Median :62.62   Median :20855   Median :47.51  \n Mean   :25.42   Mean   :59.00   Mean   :24324   Mean   :47.54  \n 3rd Qu.:27.73   3rd Qu.:75.72   3rd Qu.:36079   3rd Qu.:48.29  \n Max.   :37.42   Max.   :99.27   Max.   :68649   Max.   :55.94  \n    IncomeHH        Nvehicles       DrivingLic    CarParkFree_Work\n Min.   : 884.5   Min.   :1.020   Min.   :37.04   Min.   : 5.47   \n 1st Qu.:1417.8   1st Qu.:1.350   1st Qu.:57.67   1st Qu.:40.39   \n Median :1594.7   Median :1.545   Median :63.00   Median :50.51   \n Mean   :1732.6   Mean   :1.530   Mean   :62.50   Mean   :49.30   \n 3rd Qu.:1953.5   3rd Qu.:1.670   3rd Qu.:68.84   3rd Qu.:57.92   \n Max.   :3462.3   Max.   :2.420   Max.   :80.79   Max.   :87.60   \n     PTpass      internal  Lisboa       Area_km2      \n Min.   : 0.00   Yes:118   No :188   Min.   :  1.494  \n 1st Qu.:13.41   No :118   Yes: 48   1st Qu.:  5.044  \n Median :22.71                       Median : 11.598  \n Mean   :23.82                       Mean   : 25.553  \n 3rd Qu.:32.94                       3rd Qu.: 28.511  \n Max.   :60.45                       Max.   :282.125  \n```\n\n\n:::\n\n```{.r .cell-code}\nskim(data) # In a more organized way\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |     |\n|:------------------------|:----|\n|Name                     |data |\n|Number of rows           |236  |\n|Number of columns        |20   |\n|_______________________  |     |\n|Column type frequency:   |     |\n|character                |1    |\n|factor                   |2    |\n|numeric                  |17   |\n|________________________ |     |\n|Group variables          |None |\n\n\n**Variable type: character**\n\n|skim_variable    | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:----------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|Origin_dicofre16 |         0|             1|   6|   6|     0|      118|          0|\n\n\n**Variable type: factor**\n\n|skim_variable | n_missing| complete_rate|ordered | n_unique|top_counts        |\n|:-------------|---------:|-------------:|:-------|--------:|:-----------------|\n|internal      |         0|             1|FALSE   |        2|Yes: 118, No: 118 |\n|Lisboa        |         0|             1|FALSE   |        2|No: 188, Yes: 48  |\n\n\n**Variable type: numeric**\n\n|skim_variable    | n_missing| complete_rate|     mean|       sd|      p0|      p25|      p50|      p75|      p100|hist  |\n|:----------------|---------:|-------------:|--------:|--------:|-------:|--------:|--------:|--------:|---------:|:-----|\n|Total            |         0|             1| 22457.00| 19084.45|  361.00|  5917.75| 17474.00| 33377.50| 112186.00|▇▃▂▁▁ |\n|Walk             |         0|             1|  5383.44|  6224.84|    0.00|   763.25|  3125.00|  8298.50|  32646.00|▇▂▁▁▁ |\n|Bike             |         0|             1|   107.03|   248.65|    0.00|     0.00|    13.50|    98.75|   2040.00|▇▁▁▁▁ |\n|Car              |         0|             1| 13289.24| 12351.61|    0.00|  3243.00|  9008.00| 21248.75|  52631.00|▇▃▂▁▁ |\n|PTransit         |         0|             1|  3473.79|  5467.82|    0.00|   249.00|  1057.00|  4853.00|  41672.00|▇▁▁▁▁ |\n|Other            |         0|             1|   203.45|   336.04|    0.00|     2.00|    44.00|   281.50|   2391.00|▇▁▁▁▁ |\n|Distance         |         0|             1|    11.14|     2.66|    6.84|     9.54|    10.32|    12.10|     22.66|▇▇▂▁▁ |\n|Duration         |         0|             1|    25.42|     3.91|   16.30|    23.00|    24.70|    27.73|     37.42|▁▇▆▂▁ |\n|Car_perc         |         0|             1|    59.00|    21.56|    0.00|    45.40|    62.62|    75.72|     99.27|▁▃▆▇▅ |\n|N_INDIVIDUOS     |         0|             1| 24323.80| 16438.04| 1566.00| 11060.00| 20855.00| 36079.00|  68649.00|▇▆▅▃▁ |\n|Male_perc        |         0|             1|    47.54|     1.57|   44.61|    46.58|    47.50|    48.29|     55.94|▅▇▂▁▁ |\n|IncomeHH         |         0|             1|  1732.55|   453.11|  884.46|  1417.76|  1594.73|  1953.50|   3462.32|▃▇▃▁▁ |\n|Nvehicles        |         0|             1|     1.53|     0.24|    1.02|     1.35|     1.54|     1.67|      2.42|▃▇▆▂▁ |\n|DrivingLic       |         0|             1|    62.50|     8.12|   37.04|    57.67|    63.00|    68.84|     80.79|▁▂▇▇▂ |\n|CarParkFree_Work |         0|             1|    49.30|    14.30|    5.47|    40.39|    50.51|    57.92|     87.60|▁▃▇▇▁ |\n|PTpass           |         0|             1|    23.82|    12.87|    0.00|    13.41|    22.72|    32.94|     60.45|▅▇▇▂▁ |\n|Area_km2         |         0|             1|    25.55|    42.58|    1.49|     5.04|    11.60|    28.51|    282.13|▇▁▁▁▁ |\n\n\n:::\n:::\n\n\n\n\n\n\n## Missing data\n\nIs there missing data (`NA`)? How many?\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(is.na(data))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nFALSE \n 4720 \n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Outliers\n\nInspect outliers and distributions\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboxplot(data) # This does now work if variables are not all continuous\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_continuous = data |> select(-Origin_dicofre16, -internal, -Lisboa) # Exclude categorical variables\nboxplot(data_continuous) # Exclude categorical variables\n```\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-7-1.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\nhist(data_continuous$Total) # histogram\n```\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-7-2.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\nboxplot(data_continuous$Total) # outliers detected\n```\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-7-3.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n\n\n### Treating outliers\n\nBased on the theory, we can create a function to detect the outliers.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutlier = function(x) {\n  q = quantile(x, probs = c(0.25, 0.75), na.rm = TRUE)  # Q1 and Q3\n  caps = quantile(x, probs = c(0.05, 0.95), na.rm = TRUE) # 5th and 95th percentile\n  H = 1.5 * IQR(x, na.rm = TRUE) # interquartile range\n  \n  case_when(\n    x < (q[1] - H) ~ caps[1], # replace values that are LESS than Q1-1.5*IQR with the P5 value\n    x > (q[2] + H) ~ caps[2], # replace values that are MORE than Q3+1.5*IQR with the P95 value\n    TRUE ~ x # otherwise, return the original value\n  )\n}\n```\n:::\n\n\n\n\n\n\nNow, use it in a copy of the table\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_outliers = data_continuous # duplicate the table\ndata_outliers$Total = outlier(data_outliers$Total) # Use the function to the same variable\n```\n:::\n\n\n\n\n\n\nTake a look again at the boxplot\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboxplot(data_outliers$Total)\n```\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-10-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n\n\nCompare the variable with and without the outliers\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Mean\nmean(data$Total)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 22457\n```\n\n\n:::\n\n```{.r .cell-code}\nmean(data_outliers$Total)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 22013.51\n```\n\n\n:::\n\n```{.r .cell-code}\n# Median\nmedian(data$Total)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 17474\n```\n\n\n:::\n\n```{.r .cell-code}\nmedian(data_outliers$Total)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 17474\n```\n\n\n:::\n\n```{.r .cell-code}\n# Standard deviation\nsd(data$Total)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 19084.45\n```\n\n\n:::\n\n```{.r .cell-code}\nsd(data_outliers$Total)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 17739.39\n```\n\n\n:::\n:::\n\n\n\n\n\n\n::: {.callout-note appearance=\"simple\"}\n### Note\n\nThere are many methods to treat outliers. This is just one of them.\n:::\n\n## Histograms\n\nPlot histograms of all the continuous variables\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_histogram(data, ncol = 3) # histograms with 3 columns\n```\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-12-1.pdf){fig-pos='H'}\n:::\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-12-2.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\nplot_density(data, ncol = 3) # density plots\n```\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-12-3.pdf){fig-pos='H'}\n:::\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-12-4.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n\n\nCheck how other variables are distributed regarding `Car_perc`\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_boxplot(data, by = \"Car_perc\", ncol = 3)\n```\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-13-1.pdf){fig-pos='H'}\n:::\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-13-2.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n\n::: {.callout-note appearance=\"simple\"}\n\n### Note\n\nWhen `Car_perc` increases, `PTpass` decreases.\n:::\n\n::: {.callout-tip appearance=\"simple\"}\n\n### Exercise\n\nTry plotting the boxplots of each independent variable with `Car_perc`.\n:::\n\n\n## Correlations\n\nPlot correlation heatmaps, between continuous variables.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# estimate correlation matrix\ncorrmat = cor(data_continuous, method = \"pearson\") |> round(2)\ncorrmat\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                 Total  Walk  Bike   Car PTransit Other Distance Duration\nTotal             1.00  0.49  0.44  0.93     0.78  0.48    -0.36     0.10\nWalk              0.49  1.00  0.27  0.21     0.09 -0.01    -0.34     0.03\nBike              0.44  0.27  1.00  0.41     0.26  0.11     0.00     0.08\nCar               0.93  0.21  0.41  1.00     0.70  0.47    -0.29    -0.03\nPTransit          0.78  0.09  0.26  0.70     1.00  0.58    -0.20     0.36\nOther             0.48 -0.01  0.11  0.47     0.58  1.00    -0.09     0.22\nDistance         -0.36 -0.34  0.00 -0.29    -0.20 -0.09     1.00     0.16\nDuration          0.10  0.03  0.08 -0.03     0.36  0.22     0.16     1.00\nCar_perc          0.01 -0.53  0.00  0.27     0.01  0.09     0.26    -0.40\nN_INDIVIDUOS      0.72  0.56  0.29  0.68     0.28  0.20    -0.46    -0.11\nMale_perc        -0.38 -0.32 -0.14 -0.33    -0.20 -0.08     0.39    -0.01\nIncomeHH          0.25  0.04  0.22  0.26     0.23  0.10    -0.09     0.30\nNvehicles        -0.16 -0.25  0.00 -0.02    -0.21 -0.14     0.27    -0.26\nDrivingLic       -0.01 -0.12  0.08  0.08    -0.10 -0.09     0.23    -0.12\nCarParkFree_Work -0.26 -0.29 -0.03 -0.08    -0.38 -0.25     0.30    -0.53\nPTpass            0.25  0.23  0.01  0.09     0.39  0.21    -0.36     0.55\nArea_km2         -0.15 -0.15  0.03 -0.08    -0.19 -0.09     0.23    -0.25\n                 Car_perc N_INDIVIDUOS Male_perc IncomeHH Nvehicles DrivingLic\nTotal                0.01         0.72     -0.38     0.25     -0.16      -0.01\nWalk                -0.53         0.56     -0.32     0.04     -0.25      -0.12\nBike                 0.00         0.29     -0.14     0.22      0.00       0.08\nCar                  0.27         0.68     -0.33     0.26     -0.02       0.08\nPTransit             0.01         0.28     -0.20     0.23     -0.21      -0.10\nOther                0.09         0.20     -0.08     0.10     -0.14      -0.09\nDistance             0.26        -0.46      0.39    -0.09      0.27       0.23\nDuration            -0.40        -0.11     -0.01     0.30     -0.26      -0.12\nCar_perc             1.00        -0.09      0.18    -0.07      0.40       0.33\nN_INDIVIDUOS        -0.09         1.00     -0.46     0.14     -0.14       0.00\nMale_perc            0.18        -0.46      1.00    -0.34      0.19      -0.11\nIncomeHH            -0.07         0.14     -0.34     1.00      0.23       0.22\nNvehicles            0.40        -0.14      0.19     0.23      1.00       0.44\nDrivingLic           0.33         0.00     -0.11     0.22      0.44       1.00\nCarParkFree_Work     0.53        -0.19      0.26    -0.01      0.54       0.39\nPTpass              -0.52         0.20     -0.34     0.16     -0.44      -0.45\nArea_km2             0.25        -0.19      0.30    -0.18      0.12       0.10\n                 CarParkFree_Work PTpass Area_km2\nTotal                       -0.26   0.25    -0.15\nWalk                        -0.29   0.23    -0.15\nBike                        -0.03   0.01     0.03\nCar                         -0.08   0.09    -0.08\nPTransit                    -0.38   0.39    -0.19\nOther                       -0.25   0.21    -0.09\nDistance                     0.30  -0.36     0.23\nDuration                    -0.53   0.55    -0.25\nCar_perc                     0.53  -0.52     0.25\nN_INDIVIDUOS                -0.19   0.20    -0.19\nMale_perc                    0.26  -0.34     0.30\nIncomeHH                    -0.01   0.16    -0.18\nNvehicles                    0.54  -0.44     0.12\nDrivingLic                   0.39  -0.45     0.10\nCarParkFree_Work             1.00  -0.66     0.32\nPTpass                      -0.66   1.00    -0.41\nArea_km2                     0.32  -0.41     1.00\n```\n\n\n:::\n\n```{.r .cell-code}\n# store the results so you can call the p-value at the corrplot\nres = cor.mtest(data_continuous, conf.level = .95) \n\ncorrplot(\n  corrmat,\n  method = \"color\", # or \"circle\"\n  p.mat = res$p,\n  sig.level = 0.05,\n  type = \"upper\", # display only the upper triangular\n  # order = \"hclust\", # order by hierarchical clustering\n  tl.col = \"black\" # text label color\n)\n```\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-14-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n\n::: {.callout-note appearance=\"simple\"}\n\n### Note\n\nThe pairwise correlations that are crossed are statistically not significant.\nThe null hypothesis (H~0~) is that correlation is zero.\nThe alternative hypothesis (H~A~) is that correlation is not zero.\n\nThis means that the correlations are only significant when you reject the null hypothesis (p-value < 0.05).\n:::\n\nOther method, using the `DataExplorer` package\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_correlation(data_continuous)\n```\n\n::: {.cell-output-display}\n![](eda_files/figure-pdf/unnamed-chunk-15-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n\n\n\nCheck the _p-value_ of a crossed pair correlation: \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncor.test(data$IncomeHH, data$Bike)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's product-moment correlation\n\ndata:  data$IncomeHH and data$Bike\nt = 3.5261, df = 234, p-value = 0.0005074\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.09977779 0.34249284\nsample estimates:\n      cor \n0.2246163 \n```\n\n\n:::\n\n```{.r .cell-code}\ncor.test(data$IncomeHH, data$Duration)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's product-moment correlation\n\ndata:  data$IncomeHH and data$Duration\nt = 4.817, df = 234, p-value = 2.62e-06\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.1795420 0.4122446\nsample estimates:\n     cor \n0.300356 \n```\n\n\n:::\n\n```{.r .cell-code}\ncor.test(data$Distance, data$Duration)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's product-moment correlation\n\ndata:  data$Distance and data$Duration\nt = 2.4605, df = 234, p-value = 0.0146\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.0317533 0.2808153\nsample estimates:\n      cor \n0.1588098 \n```\n\n\n:::\n:::\n\n\n\n\n\n::: {.callout-tip appearance=\"simple\"}\n\nThe default for `cor.test` is Pearson, two-sided, with a 95% confident level.\nCheck `?cor.test` for more options.\n:::\n\n\n\n\n\n\n\n\n",
    "supporting": [
      "eda_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}